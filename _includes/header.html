<div id="particles-js">
  <div class="header">
      <h1>
        <!-- Empty initially, will be typed by JS -->
        <span id="username" class="site-title"></span> 
        <span id="user-title" class="site-description"></span> 
      </h1>
      <div class="header-icons">
        <a aria-label="Send email" href="mailto:{{ site.email }}"><i class="icon fa fa-envelope"></i></a>
        <a aria-label="My Github" target="_blank" href="https://github.com/{{ site.github_username }}"><i class="icon fa fa-github-alt" aria-hidden="true"></i></a>
      </div>
      <div class="header-links">
        <a class="link" href="#about" data-scroll>About Me</a>
        <a class="link" href="#projects" data-scroll>Projects</a>
      </div>
  </div>
  <a class="down" href="#about" data-scroll><i class="icon fa fa-chevron-down" aria-hidden="true"></i></a>
</div>

<!-- Add the CSS for typing effect and cursor -->
<style>
  /* Add common styles for the text */
  .site-title, .site-description {
      display: inline-block;  /* Ensure it is inline to allow the cursor to appear next to the text */
      position: relative;     /* So the cursor can be positioned correctly */
      font-size: 2.5rem;
      font-family: 'Arial', sans-serif;
      color: #333;
      font-weight: bold;
      white-space: nowrap;
      visibility: hidden;     /* Initially hide the text until it's typed */
  }

  /* Cursor style */
  .cursor {
      content: "|";             /* The cursor character */
      position: absolute;
      right: -5px;              /* Position the cursor to the right of the text */
      top: 0;
      animation: blink 0.7s step-end infinite;  /* Blinking animation */
  }

  /* Blinking effect for cursor */
  @keyframes blink {
      50% {
          opacity: 0;            /* Make the cursor invisible at halfway point */
      }
  }
</style>

<!-- Add JavaScript for typing effect -->
<script>
   // Typing effect function
   function typeWriter(elementId, text, speed, callback) {
      let i = 0;
      let element = document.getElementById(elementId);
      let cursor = document.createElement('span'); // Create cursor element
      cursor.classList.add('cursor');
      element.appendChild(cursor); // Add cursor to element
      element.style.visibility = 'visible'; // Make the element visible as we start typing

      // Function to show one character at a time
      function type() {
         if (i < text.length) {
            element.innerHTML = text.substring(0, i + 1); // Show text one character at a time
            i++;
            setTimeout(type, speed);  // Slow down the typing speed
         } else {
            // After typing is done, remove the cursor
            cursor.style.visibility = 'hidden';
            callback(); // Call the callback after typing is complete
         }
      }
      
      // Start typing process
      type();
   }

   window.onload = function() {
      let username = "{{ site.username }}";  // Pull from config.yml
      let userTitle = "{{ site.user_title }}";  // Pull from config.yml

      // Start typing effect for username with slower speed (150ms per character)
      setTimeout(() => {
         typeWriter("username", username, 150, () => {
            // Callback to do something after typing is complete (like making text visible)
         });
      }, 100);  // Delay before typing starts (optional)

      // Start typing effect for user title after username finishes
      setTimeout(() => {
         typeWriter("user-title", userTitle, 150, () => {
            // Callback after user-title typing is complete
         });
      }, username.length * 150 + 500); // Delay user-title typing after username finishes
   };
</script>
